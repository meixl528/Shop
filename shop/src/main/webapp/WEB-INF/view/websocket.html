<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<button id="button" type="button">websocket测试</button>
</body>
<script type="text/javascript" src="js/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="https://cdn.bootcss.com/sockjs-client/1.1.4/sockjs.js"></script>
<script type="text/javascript" src="https://cdn.bootcss.com/sockjs-client/1.1.4/sockjs.min.js"></script>
        <script>
            var websocket;
            if ('WebSocket' in window) {
                websocket = new WebSocket("ws://localhost:8081/shop/webSocketServer");
            } else if ('MozWebSocket' in window) {
                websocket = new MozWebSocket("ws://localhost:8081/shop/webSocketServer");
            } else {
                websocket = new SockJS("http://localhost:8081/shop/sockjs/webSocketServer");
            }
            websocket.onopen = function (evnt) {
            };
            websocket.onmessage = function (evnt) {
                $("#msgcount").html("(<font color='red'>"+evnt.data+"</font>)")
            };
            websocket.onerror = function (evnt) {
            };
            websocket.onclose = function (evnt) {
            }

        </script>
        
        <script type="text/javascript">
	    	$("#button").click(function(){
	    		$.ajax({
	    			url:"testWebSocket.do",
	    			data:{},
	    			dataType:"json",
	    			type:"post",
	    			cache:false,
	    			success:function(data){
	    				alert(data);
	    			},
	    			error:function(er){
	    				alert("error")
	    			}
	    		})
	    	})
        
        </script>

</html>